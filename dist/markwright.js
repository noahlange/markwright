"use strict";var me=Object.create;var g=Object.defineProperty;var le=Object.getOwnPropertyDescriptor;var ue=Object.getOwnPropertyNames;var ce=Object.getPrototypeOf,pe=Object.prototype.hasOwnProperty;var de=(e,t,o)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var fe=(e,t)=>{for(var o in t)g(e,o,{get:t[o],enumerable:!0})},B=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ue(t))!pe.call(e,r)&&r!==o&&g(e,r,{get:()=>t[r],enumerable:!(n=le(t,r))||n.enumerable});return e};var ge=(e,t,o)=>(o=e!=null?me(ce(e)):{},B(t||!e||!e.__esModule?g(o,"default",{value:e,enumerable:!0}):o,e)),we=e=>B(g({},"__esModule",{value:!0}),e);var W=(e,t,o)=>(de(e,typeof t!="symbol"?t+"":t,o),o);var Oe={};fe(Oe,{default:()=>D});module.exports=we(Oe);var J=ge(require("react")),Re=require("react/jsx-runtime"),A=J.default.forwardRef((e,t)=>(0,Re.jsx)("div",{className:"mw",style:{position:"absolute",left:-1e4},ref:t,children:e.children}));var l=require("react"),h=require("simple-markdown");var he="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";function s(e=8){let t="",o=e;for(;o--;)t+=he[Math.random()*64|0];return t}var y=require("react");function O(e,t){if(e)if(Array.isArray(e))for(let o of e)O(o,t);else e.content&&O(e.content,t),t(e);else return}function c(e,t){let o=[];return O(t,n=>{n.type===e&&o.push(n)}),o}function u(e="div",t){return{react:(o,n,r)=>(0,y.createElement)(e,{children:o.content?n(o.content):null,className:t?.replace("mw-",""),key:r.key?.toString()??o.id})}}function X(e){return(t,o,n)=>({...e(t,o,n),id:s()})}function q(e){return(t,o,n)=>{let r=e(t,o,n);return r?.props?(0,y.cloneElement)(r,{...r.props,id:t.id,key:t.id}):r}}function I(e){return e.length?{type:"mw-section",id:s(),content:{type:"mw-page",id:s(),content:{type:"mw-body",id:s(),content:{type:"mw-content",id:s(),content:e}}}}:null}function v(e){let t=[],o=0;for(let n of c("heading",e))if(n.level===1){let r=e.indexOf(n);t.push(I(e.slice(o,r))),o=r}return t.push(I(e.slice(o))),t.filter(n=>n!==null)}var x=e=>e?parseInt(e):0,p=class{number=0;elementNotes=new Map;bounds;container;elements=[];constructor(t,o){this.container=o,this.number=t;let n=o.getBoundingClientRect(),r=x(getComputedStyle(o).columnCount)||1,i=n.width,a=n.height*r;this.bounds={width:i,height:a}}get ids(){return this.elements.map(t=>t.id)}get footnotes(){return Array.from(this.elementNotes.values()).reduce((t,o)=>t+o,0)}get height(){let[t,o]=[0,0];for(let n of this.elements){let r=getComputedStyle(n),i=n.offsetHeight,[a,m]=[x(r.marginTop),x(r.marginBottom)];t+=i+Math.max(a,o),o=m}return t+=o,t}get isOverflowing(){return this.height>this.bounds.height}add(t){this.elements.push(t);let o=Array.from(t.querySelectorAll(".footnote")).length;o&&this.elementNotes.set(t,o)}pop(){let t=this.elements.pop();return t&&this.elementNotes.delete(t),t??null}};W(p,"FOOTNOTE_BLOCK_HEIGHT",48);var k=class{pages=[];number;start;name=null;constructor(t,o){this.number=t,this.start=o}get ids(){return this.pages.flatMap(t=>t.ids)}add(t){this.pages.push(t)}};function Q(e){return Array.from(e)}function _(e){let t=1;return Q(e.querySelectorAll(".section .content")).map((o,n)=>{let r=new k(n+1,t),i=new p(t++,o);for(let a of Q(o.children)){i.add(a);let m=i.isOverflowing,b=a.classList.contains("mw-break-page");if(m||b){let f=i;if(f.pop(),r.add(f),i=new p(t++,o),m){let S=f.pop();S&&(/h/i.test(S.tagName)?i.add(S):f.add(S))}i.add(a)}}return r.add(i),r})}function G(e,t,o,n,r){let i=r.map(a=>({...a,...a.node}));return{id:t.number,type:"mw-page",content:[{type:"mw-header",content:n,data:{page:t,section:e}},{type:"mw-body",content:[{content:o,type:"mw-content"},{content:i,id:`mw-page-${t.number}-footnotes`,type:"mw-footnotes"}]},{type:"mw-footer",id:`mw-page-${t.number}-footer`,data:{page:t,section:e},content:[]}]}}function K(e,t){let o=e.reduce((i,a)=>({...i,[a.anchor]:a}),{}),n=0,r={};for(let i of c("mw-footnote",t))i.inline&&(i.number=++n,r[i.anchor]=i.number);return Object.entries(r).map(([i,a])=>({node:o[i],anchor:i,number:a}))}function F(e,t){return _(t).map(o=>{let n=c("heading",e).filter(r=>o.ids.includes(r.id)&&r.level===1).flatMap(r=>r.content);return{type:"mw-section",id:o.number,content:o.pages.map(r=>{let i=e.filter(m=>r.ids.includes(m.id)),a=K(c("mw-footnote",e).filter(m=>!m.inline),i);return G(o,r,i,n,a)})}})}var C=require("simple-markdown");var U=require("simple-markdown");var Se=require("react/jsx-runtime"),be={match:(0,U.blockRegex)(/^ *(:{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n *)+\n/),order:0,parse(e,t,o){return o.blocks||(o.blocks=1),{block:e[2],content:t(`

${e[3]}

`,o),id:s()}},react(e,t){return(0,Se.jsx)("div",{id:e.id,className:`block ${e.block}`,children:t(e.content)},e.id)}},E=be;var V=require("simple-markdown");var z=require("react/jsx-runtime"),ye={match:(0,V.blockRegex)(/^<br(?:-(page|col))?\s?\/?>/),order:0,parse(e){return{breakType:e[1]||"line",id:s()}},react(e){switch(e.breakType){case"col":case"page":return(0,z.jsx)("div",{id:e.id,className:`mw-break-${e.breakType}`},e.id);default:return(0,z.jsx)("br",{id:e.id},e.id)}}},M=ye;var N=require("simple-markdown");var w=require("react/jsx-runtime"),$={match:(0,N.inlineRegex)(/^\[\^([\d\w]+)\](?::(\s.+))?/),order:N.defaultRules.link.order-1,parse(e,t,o){let[,n,r]=e;return{id:s(),anchor:n,inline:!r,content:t(r??null,o)}},react(e,t){let o=`footnote-${e.anchor}`,n=e.content?t(e.content):null,r=e.number??e.anchor;return e.inline?(0,w.jsx)("sup",{children:(0,w.jsx)("a",{href:o,children:r})},e.id):(0,w.jsxs)("span",{id:o,className:"footnote",children:[r,".",n]},e.id)}},Y={react(e,t){let o=`footnotes ${e.content?.length?"":"empty"}`;return(0,w.jsx)("div",{className:o,children:t(e.content)},`mw-footnote-${e.id}`)}};var d=require("simple-markdown");var Z={...d.defaultRules.heading,match:(0,d.blockRegex)(/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n *)/)},j={...d.defaultRules.blockQuote,match:(0,d.blockRegex)(/^( *>[^\n]+(\n[^\n]+)*\n*)/),...u("blockquote")},H={...d.defaultRules.paragraph,...u("p")};var T=require("react/jsx-runtime"),ee={react(e,t){return(0,T.jsx)("div",{className:"mw",children:t(e.content)},`mw-${e.id}`)}},te={react(e,t){let o=e.id%2?"odd":"even";return(0,T.jsx)("div",{className:`page page-${e.id} ${o}`,children:t(e.content)},`mw-page-${e.id}`)}};function oe(e){return{react(t,o){let{section:n,page:r}=t.data,i=`mw-${n.number}-header-${r.number}`;return n.name=o(t.content),(0,T.jsx)("header",{children:e(n,r)},i)}}}function re(e){return{react(t,o){let{section:n,page:r}=t.data,i=`mw-${n.number}-footer-${r.number}`;return n.name=o(t.content),(0,T.jsx)("footer",{children:e(n,r)},i)}}}var Ne=require("react/jsx-runtime"),ke={react(e,t){return(0,Ne.jsx)("section",{className:`section section-${e.id}`,children:t(e.content)},`section-${e.id}`)}},ne=ke;var R=require("react/jsx-runtime"),L={...C.defaultRules,mw:ee,paragraph:H,"mw-block":E,"mw-break":M,"mw-footnote":$,"mw-footnotes":Y,"mw-page":te,"mw-section":ne,"mw-column-separator":u("hr","mw-column-separator"),"mw-body":u("div","mw-body"),"mw-column":u("div","mw-column"),"mw-content":u("div","mw-content"),"mw-header":u("div","mw-header")};function ie(){let e={};for(let t in L){let o={...L[t]};if(!t.startsWith("mw")){let n=o.react;n&&(o.react=q(n))}e[t]=o}return e}function ae(e={}){let t=e.header??(n=>(0,R.jsx)(R.Fragment,{children:n.name})),o=e.footer??((n,r)=>(0,R.jsx)(R.Fragment,{children:r.number}));return{...L,"mw-header":oe(t),"mw-footer":re(o)}}function se(){let e={...C.defaultRules,blockQuote:j,heading:Z,paragraph:H,"mw-block":E,"mw-break":M,"mw-footnote":$},t={};for(let o in e){let n={...e[o]},r=n.parse;n.parse=X(r),t[o]=n}return t}var P=require("react/jsx-runtime"),Pe=(0,h.parserFor)(se()),Ae=(0,h.outputFor)(ie(),"react");function D(e){let[t,o]=(0,l.useState)(null),[n,r]=(0,l.useState)(null),i=(0,l.useMemo)(()=>(0,h.outputFor)(ae(e),"react"),[e.header,e.footer]),a=(0,l.useMemo)(()=>Pe(e.value),[e.value]);(0,l.useEffect)(()=>o(Ae(v(a))),[a]);let m=(0,l.useCallback)(b=>{if(b&&t){let f=F(a,b);r(i(f))}},[t,e.className]);return(0,P.jsxs)("div",{className:e.className,children:[(0,P.jsx)(A,{ref:m,children:t}),(0,P.jsx)("div",{className:"mw",children:n})]})}
